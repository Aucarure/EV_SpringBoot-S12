<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clientes - Sabor Gourmet</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .search-bar-wrapper {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
        }

        .search-form {
            display: flex;
            gap: 0.5rem;
            flex: 1;
            max-width: 500px;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: var(--card-bg);
            border: 1px dashed var(--border);
            border-radius: 12px;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .empty-description {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .search-bar-wrapper {
                flex-direction: column;
                align-items: stretch;
            }

            .search-form {
                max-width: 100%;
            }

            .action-buttons {
                width: 100%;
            }

            .action-buttons > * {
                flex: 1;
            }
        }
    </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar">
    <div style="display: flex; justify-content: space-between; align-items: center; max-width: 1280px; margin: 0 auto; width: 100%;">
        <a href="/home" class="navbar-brand">Sabor Gourmet</a>
        <div style="display: flex; gap: 2rem; align-items: center;">
            <a href="/clientes" class="nav-link">Clientes</a>
            <a href="/mesas" class="nav-link">Mesas</a>
            <a href="/mesas/disponibles" class="nav-link">Disponibles</a>
            <form th:action="@{/logout}" method="post" style="margin: 0;">
                <button type="submit" class="btn-modern" style="padding: 0.5rem 1.25rem;">
                    Cerrar Sesi√≥n
                </button>
            </form>
        </div>
    </div>
</nav>

<!-- Contenido -->
<div class="container-modern">
    <div class="page-header fade-in">
        <h1 class="page-title">Gesti√≥n de Clientes</h1>
        <p class="page-subtitle">Administra la informaci√≥n de tus clientes</p>
    </div>

    <!-- Barra de B√∫squeda y Acciones -->
    <div class="search-bar-wrapper fade-in" style="animation-delay: 0.1s;">
        <form th:action="@{/clientes/buscar}" method="get" class="search-form">
            <input type="text"
                   name="texto"
                   placeholder="Buscar cliente..."
                   class="form-control-modern"
                   style="flex: 1;">
            <button type="submit" class="btn-modern">Buscar</button>
        </form>

        <a th:href="@{/clientes/nuevo}" class="btn-primary-modern">
            + Nuevo Cliente
        </a>
    </div>

    <!-- Tabla de Clientes -->
    <div class="fade-in" style="animation-delay: 0.2s;">
        <div style="overflow-x: auto;">
            <table class="table-modern">
                <thead>
                <tr>
                    <th>DNI</th>
                    <th>Nombre Completo</th>
                    <th>Tel√©fono</th>
                    <th>Correo</th>
                    <th>Estado</th>
                    <th style="text-align: center;">Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="cliente : ${clientes}">
                    <td>
                        <span style="font-family: monospace; font-weight: 500;" th:text="${cliente.dni}">12345678</span>
                    </td>
                    <td>
                        <div style="font-weight: 500;" th:text="${cliente.nombres + ' ' + cliente.apellidos}">Juan P√©rez</div>
                    </td>
                    <td th:text="${cliente.telefono != null ? cliente.telefono : '‚Äî'}">999888777</td>
                    <td th:text="${cliente.correo != null ? cliente.correo : '‚Äî'}">juan@email.com</td>
                    <td>
                        <span th:if="${cliente.estado == 'activo'}" class="badge-modern badge-activo">
                            Activo
                        </span>
                        <span th:if="${cliente.estado == 'inactivo'}" class="badge-modern badge-inactivo">
                            Inactivo
                        </span>
                    </td>
                    <td>
                        <div class="table-actions" style="justify-content: center;">
                            <a th:href="@{/clientes/editar/{id}(id=${cliente.idCliente})}"
                               class="btn-modern btn-icon"
                               title="Editar cliente">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor">
                                    <path d="M11.5 2.5L13.5 4.5L5.5 12.5H3.5V10.5L11.5 2.5Z" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </a>
                            <a th:if="${cliente.estado == 'activo'}"
                               th:href="@{/clientes/eliminar/{id}(id=${cliente.idCliente})}"
                               class="btn-danger-modern btn-icon"
                               onclick="return confirm('¬øDesactivar este cliente?')"
                               title="Desactivar">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor">
                                    <path d="M4 4L12 12M12 4L4 12" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </a>
                            <a th:if="${cliente.estado == 'inactivo'}"
                               th:href="@{/clientes/activar/{id}(id=${cliente.idCliente})}"
                               class="btn-success-modern btn-icon"
                               title="Activar">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor">
                                    <path d="M3 8L6 11L13 4" stroke-width="1.5" stroke-linecap="round"/>
                                </svg>
                            </a>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Estado Vac√≠o -->
        <div th:if="${#lists.isEmpty(clientes)}" class="empty-state">
            <div class="empty-icon">üë§</div>
            <h2 class="empty-title">No hay clientes registrados</h2>
            <p class="empty-description">Comienza agregando tu primer cliente</p>
            <a th:href="@{/clientes/nuevo}" class="btn-primary-modern">
                + Agregar Cliente
            </a>
        </div>
    </div>
</div>
</body>
</html>